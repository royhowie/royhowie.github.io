(()=>{"use strict";var t={81:(t,e)=>{var s;Object.defineProperty(e,"__esModule",{value:!0}),e.RecursiveDivide=e.Ellers=e.DfsFill=e.Grid=e.GridContext=e.Cell=e.Direction=void 0,function(t){t[t.UP=1]="UP",t[t.RIGHT=2]="RIGHT",t[t.DOWN=4]="DOWN",t[t.LEFT=8]="LEFT"}(s||(e.Direction=s={}));class n{x;y;paths=new Map;constructor(t,e){this.x=t,this.y=e}visited(){return this.paths.size>0}walkTo(t,e){switch(this.paths.set(t,e),t){case s.UP:e.paths.set(s.DOWN,this);break;case s.DOWN:e.paths.set(s.UP,this);break;case s.LEFT:e.paths.set(s.RIGHT,this);break;case s.RIGHT:e.paths.set(s.LEFT,this)}}}e.Cell=n,e.GridContext=class{rows;cols;constructor(t,e){this.rows=t,this.cols=e}};class o{ctx;grid=[];constructor(t){this.ctx=t;for(let t=0;t<this.ctx.rows;t++)for(let e=0;e<this.ctx.cols;e++)this.grid[t*this.ctx.cols+e]=new n(t,e)}get(t,e){if(!(t<0||t>=this.ctx.rows||e<0||e>=this.ctx.cols))return this.grid[e+t*this.ctx.cols]}}function r(t,e){return t+window.crypto.getRandomValues(new Uint8Array(1))[0]%(e-t)}e.Grid=o,e.DfsFill=class{ctx;constructor(t){this.ctx=t}newGrid(){const t=new o(this.ctx);return this.step(t.get(0,0),t),t}options(t,e){return[[e.get(t.x-1,t.y),s.UP],[e.get(t.x+1,t.y),s.DOWN],[e.get(t.x,t.y-1),s.LEFT],[e.get(t.x,t.y+1),s.RIGHT]].filter((([t,e])=>t&&!t.visited()))}step(t,e){for(;;){const s=this.options(t,e);if(!s.length)break;const[n,o]=s[Math.random()*s.length|0];t.walkTo(o,n),this.step(n,e)}}},e.Ellers=class{ctx;constructor(t){this.ctx=t}newGrid(){const t=new o(this.ctx);for(let e=0;e<this.ctx.rows-1;e++)this.join(t,e),this.descend(t,e);for(let e=0;e<this.ctx.cols-1;e++)this.connectColumn(t,this.ctx.rows-1,e);return t}descend(t,e){for(let n=0;n<this.ctx.cols;n++){let o=n,i=t.get(e,n);for(;i=i?.paths.get(s.RIGHT);)o=i.y;const a=r(n,o+1);t.get(e,a).walkTo(s.DOWN,t.get(e+1,a)),n=o}}join(t,e){for(let s=0;s<this.ctx.cols-1;s++)0===r(0,2)&&this.connectColumn(t,e,s)}connectColumn(t,e,n){t.get(e,n).walkTo(s.RIGHT,t.get(e,n+1))}},e.RecursiveDivide=class{ctx;constructor(t){this.ctx=t}newGrid(){const t=new o(this.ctx);return this.divide(t,0,0,this.ctx.rows,this.ctx.cols),t}divide(t,e,n,o,r){if(o!==e+1)if(r!==n+1)if(window.crypto.getRandomValues(new Uint8Array(1))[0]%2==0){const i=this.random(e+1,o),a=this.random(n,r);t.get(i-1,a).walkTo(s.DOWN,t.get(i,a)),this.divide(t,e,n,i,r),this.divide(t,i,n,o,r);for(let e=n;e<r-1;e++){const n=t.get(i-1,e),o=t.get(i-1,e+1);0==o.paths.size&&n.walkTo(s.RIGHT,o)}}else{const i=this.random(e,o),a=this.random(n+1,r);t.get(i,a-1).walkTo(s.RIGHT,t.get(i,a)),this.divide(t,e,n,o,a),this.divide(t,e,a,o,r);for(let n=e;n<o-1;n++){const e=t.get(n,a-1),o=t.get(n+1,a-1);0==o.paths.size&&e.walkTo(s.DOWN,o)}}else for(let r=e;r<o-1;r++)t.get(r,n).walkTo(s.DOWN,t.get(r+1,n));else for(let o=n;o<r-1;o++)t.get(e,o).walkTo(s.RIGHT,t.get(e,o+1))}random(t,e){return t+Math.floor((e-t)*Math.random())}}},73:(t,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Painter=e.RandomWalk=e.BfsWalk=e.WaveStrategy=e.Step=e.PAINT_OFFSET=e.BOX_WIDTH=e.BAR_WIDTH=e.GAP=e.BAR_COLOR=void 0;const n=s(81);e.BAR_COLOR="#4682b4",e.GAP=2,e.BAR_WIDTH=32,e.BOX_WIDTH=e.GAP+e.BAR_WIDTH,e.PAINT_OFFSET=e.BOX_WIDTH/2|0;class o{strokes;constructor(t){this.strokes=t}}e.Step=o,e.WaveStrategy=class{zigzag;zip;constructor(t,e){this.zigzag=t,this.zip=e}generate(t,e){const s=[],n=e.rows+e.cols-1;let r=Math.random()<.5;for(let i=0;i<n;i++){const n=[],a=Math.min(i,e.rows-1),c=i<e.rows-1?0:i-e.rows+1;for(let s=0;s+c<e.cols&&a>=s;s++)n.push(t.get(a-s,s+c));this.zigzag&&(r&&n.reverse(),r=!r),this.zip?n.forEach((t=>s.push(new o(new Map([[t,new Set(t.paths.keys())]]))))):s.push(new o(new Map(n.map((t=>[t,new Set(t.paths.keys())])))))}return s}},e.BfsWalk=class{generate(t,e){const s=[];let n=[t.get(0,0)];const r=new Set;for(;n.length;){const t=[],e=new o(new Map);n.forEach((s=>{s&&!r.has(s)&&(r.add(s),e.strokes.set(s,new Set(s.paths.keys())),t.push(...s.paths.values()))})),n=t,s.push(e)}return s}};class r{concurrentCells;constructor(t){this.concurrentCells=t}generate(t,e){const s=[],n=[];for(let s=0;s<e.rows;s++)for(let o=0;o<e.cols;o++)n.push(t.get(s,o));r.shuffle(n);let i=0;for(;i<n.length;){const t=new Map;for(let e=0;e<this.concurrentCells&&i+e<n.length;e++){const s=n[i+e];t.set(s,new Set(s.paths.keys()))}s.push(new o(t)),i+=this.concurrentCells}return s}static shuffle(t){for(let e=t.length-1;e>0;e--){const s=Math.floor(Math.random()*(e+1)),n=t[e];t[e]=t[s],t[s]=n}}}e.RandomWalk=r;class i{canvas;static STEPS=1;constructor(t){this.canvas=t}paint(t,e,s,n){window.requestAnimationFrame((()=>this.drawFrame(1,s,t,n)))}outOfBoundsDraw(t,e,s,o){switch(s){case n.Direction.UP:return 0===t;case n.Direction.DOWN:return t===o.cols-1;case n.Direction.LEFT:return 0===e;case n.Direction.RIGHT:return e===o.rows-1}}drawFrame(t,s,o,r){if(t>i.STEPS)return r();for(const[r,a]of o.strokes)a.forEach((o=>{const a=1+(this.outOfBoundsDraw(r.x,r.y,o,s)?e.BAR_WIDTH:e.BOX_WIDTH),c=a*(t-1)/i.STEPS,h=a/i.STEPS;this.canvas.beginPath();let l=e.BOX_WIDTH*r.x,d=e.BOX_WIDTH*r.y;switch(o){case n.Direction.LEFT:l+=e.BAR_WIDTH/2,d+=e.BAR_WIDTH,this.canvas.moveTo(l,d-c),this.canvas.lineTo(l,d-c-h);break;case n.Direction.RIGHT:l+=e.BAR_WIDTH/2,d+=0,this.canvas.moveTo(l,d+c),this.canvas.lineTo(l,d+c+h);break;case n.Direction.UP:l+=e.BAR_WIDTH,d+=e.BAR_WIDTH/2,this.canvas.moveTo(l-c,d),this.canvas.lineTo(l-c-h,d);break;case n.Direction.DOWN:l+=0,d+=e.BAR_WIDTH/2,this.canvas.moveTo(l+c,d),this.canvas.lineTo(l+c+h,d)}this.canvas.stroke()}));window.requestAnimationFrame((()=>this.drawFrame(t+1,s,o,r)))}}e.Painter=i}},e={};function s(n){var o=e[n];if(void 0!==o)return o.exports;var r=e[n]={exports:{}};return t[n](r,r.exports,s),r.exports}(()=>{const t=s(81),e=s(73);document.addEventListener("DOMContentLoaded",(function(){const s=document.body.getBoundingClientRect(),n=document.createElement("canvas"),o=window.devicePixelRatio||1,r=s.height-e.GAP,i=s.width-e.GAP,a=Math.floor(i/e.BOX_WIDTH),c=Math.floor(r/e.BOX_WIDTH),h=a*e.BOX_WIDTH,l=c*e.BOX_WIDTH;document.body.appendChild(n),n.height=o*r,n.width=o*i;const d=n.getContext("2d");d.setTransform(i/h,0,0,r/l,e.GAP,e.GAP),d.strokeStyle=e.BAR_COLOR,d.lineWidth=e.BAR_WIDTH,console.log("starting generation");const u=new t.GridContext(a,c),w=function(e){const s=[new t.DfsFill(e),new t.Ellers(e),new t.RecursiveDivide(e)];return s[s.length*Math.random()|0]}(u).newGrid(),T=function(){const t=[new e.BfsWalk,new e.RandomWalk(50),new e.WaveStrategy(!0,!1),new e.WaveStrategy(!0,!0)];return t[t.length*Math.random()|0]}(),g=new e.Painter(d),f=T.generate(w,u);!function t(e,s){if(e===f.length)return s();g.paint(f[e],w,u,(()=>t(e+1,s)))}(0,(()=>console.log("done painting!",s,w)))}))})()})();