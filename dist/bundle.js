(()=>{"use strict";var t={81:(t,e)=>{var s;Object.defineProperty(e,"__esModule",{value:!0}),e.RecursiveDivide=e.BfsFill=e.Grid=e.GridContext=e.Cell=e.Direction=void 0,function(t){t[t.UP=1]="UP",t[t.RIGHT=2]="RIGHT",t[t.DOWN=4]="DOWN",t[t.LEFT=8]="LEFT"}(s||(e.Direction=s={}));class o{x;y;paths=new Map;constructor(t,e){this.x=t,this.y=e}visited(){return this.paths.size>0}walkTo(t,e){switch(this.paths.set(t,e),t){case s.UP:e.paths.set(s.DOWN,this);break;case s.DOWN:e.paths.set(s.UP,this);break;case s.LEFT:e.paths.set(s.RIGHT,this);break;case s.RIGHT:e.paths.set(s.LEFT,this)}}}e.Cell=o,e.GridContext=class{rows;cols;constructor(t,e){this.rows=t,this.cols=e}};class n{ctx;grid=[];constructor(t){this.ctx=t;for(let t=0;t<this.ctx.rows;t++)for(let e=0;e<this.ctx.cols;e++)this.grid[t*this.ctx.cols+e]=new o(t,e)}get(t,e){if(!(t<0||t>=this.ctx.rows||e<0||e>=this.ctx.cols))return this.grid[e+t*this.ctx.cols]}}e.Grid=n,e.BfsFill=class{ctx;constructor(t){this.ctx=t}newGrid(){const t=new n(this.ctx);return this.step(t.get(0,0),t),t}options(t,e){return[[e.get(t.x-1,t.y),s.UP],[e.get(t.x+1,t.y),s.DOWN],[e.get(t.x,t.y-1),s.LEFT],[e.get(t.x,t.y+1),s.RIGHT]].filter((([t,e])=>t&&!t.visited()))}step(t,e){for(;;){const s=this.options(t,e);if(!s.length)break;const[o,n]=s[Math.random()*s.length|0];t.walkTo(n,o),this.step(o,e)}}},e.RecursiveDivide=class{ctx;constructor(t){this.ctx=t}newGrid(){const t=new n(this.ctx);return this.divide(t,0,0,this.ctx.rows,this.ctx.cols),t}divide(t,e,o,n,i){if(!(n-e<=1||i-o<=1))if(i<n){const r=this.random(e+1,n),a=this.random(o,i-1);console.log(`[horizontal]: picked (${r},${a}) from ${e}-${n} & ${o}-${i}`);for(let e=o;e<i-1;e++)t.get(r-1,e).walkTo(s.RIGHT,t.get(r-1,e+1)),t.get(r,e).walkTo(s.RIGHT,t.get(r,e+1));t.get(r-1,a).walkTo(s.DOWN,t.get(r,a)),this.divide(t,e,o,r,i),this.divide(t,r,o,n,i)}else{const r=this.random(e,n),a=this.random(o+1,i-1);console.log(`[horizontal]: picked (${r},${a}) from ${e}-${n} & ${o}-${i}`);for(let o=e;o<n-1;o++)t.get(o,a-1).walkTo(s.DOWN,t.get(o+1,a-1)),t.get(o,a).walkTo(s.DOWN,t.get(o+1,a));t.get(r,a-1).walkTo(s.RIGHT,t.get(r,a)),this.divide(t,e,o,n,a),this.divide(t,e,a,n,i)}}random(t,e){return t+Math.floor((e-t)*Math.random())}}},73:(t,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Painter=e.RandomWalk=e.BfsWalk=e.WaveStrategy=e.Step=e.PAINT_OFFSET=e.BOX_WIDTH=e.BAR_WIDTH=e.GAP=e.BAR_COLOR=void 0;const o=s(81);e.BAR_COLOR="#4682b4",e.GAP=2,e.BAR_WIDTH=32,e.BOX_WIDTH=e.GAP+e.BAR_WIDTH,e.PAINT_OFFSET=e.BOX_WIDTH/2|0;class n{strokes;constructor(t){this.strokes=t}}e.Step=n,e.WaveStrategy=class{zigzag;zip;constructor(t,e){this.zigzag=t,this.zip=e}generate(t,e){const s=[],o=e.rows+e.cols-1;let i=Math.random()<.5;for(let r=0;r<o;r++){const o=[],a=Math.min(r,e.rows-1),c=r<e.rows-1?0:r-e.rows+1;for(let s=0;s+c<e.cols&&a>=s;s++)o.push(t.get(a-s,s+c));this.zigzag&&(i&&o.reverse(),i=!i),this.zip?o.forEach((t=>s.push(new n(new Map([[t,new Set(t.paths.keys())]]))))):s.push(new n(new Map(o.map((t=>[t,new Set(t.paths.keys())])))))}return s}},e.BfsWalk=class{generate(t,e){const s=[];let o=[t.get(0,0)];const i=new Set;for(;o.length;){const t=[],e=new n(new Map);o.forEach((s=>{s&&!i.has(s)&&(i.add(s),e.strokes.set(s,new Set(s.paths.keys())),t.push(...s.paths.values()))})),o=t,s.push(e)}return s}};class i{concurrentCells;constructor(t){this.concurrentCells=t}generate(t,e){const s=[],o=[];for(let s=0;s<e.rows;s++)for(let n=0;n<e.cols;n++)o.push(t.get(s,n));i.shuffle(o);let r=0;for(;r<o.length;){const t=new Map;for(let e=0;e<this.concurrentCells&&r+e<o.length;e++){const s=o[r+e];t.set(s,new Set(s.paths.keys()))}s.push(new n(t)),r+=this.concurrentCells}return s}static shuffle(t){for(let e=t.length-1;e>0;e--){const s=Math.floor(Math.random()*(e+1)),o=t[e];t[e]=t[s],t[s]=o}}}e.RandomWalk=i;class r{canvas;static STEPS=1;constructor(t){this.canvas=t}paint(t,e,s,o){window.requestAnimationFrame((()=>this.drawFrame(1,s,t,o)))}outOfBoundsDraw(t,e,s,n){switch(s){case o.Direction.UP:return 0===t;case o.Direction.DOWN:return t===n.cols-1;case o.Direction.LEFT:return 0===e;case o.Direction.RIGHT:return e===n.rows-1}}drawFrame(t,s,n,i){if(t>r.STEPS)return i();for(const[i,a]of n.strokes)a.forEach((n=>{const a=this.outOfBoundsDraw(i.x,i.y,n,s),c=a?e.BAR_WIDTH:e.BOX_WIDTH,h=c*(t-1)/r.STEPS,l=c/r.STEPS;this.canvas.beginPath();let d=e.BOX_WIDTH*i.x,u=e.BOX_WIDTH*i.y;switch(n){case o.Direction.LEFT:d+=e.BAR_WIDTH/2,u+=e.BAR_WIDTH,this.canvas.moveTo(d,u-h),this.canvas.lineTo(d,u-h-l);break;case o.Direction.RIGHT:d+=e.BAR_WIDTH/2,u+=0,this.canvas.moveTo(d,u+h),this.canvas.lineTo(d,u+h+l);break;case o.Direction.UP:d+=e.BAR_WIDTH,u+=e.BAR_WIDTH/2,this.canvas.moveTo(d-h,u),this.canvas.lineTo(d-h-l,u);break;case o.Direction.DOWN:d+=0,u+=e.BAR_WIDTH/2,this.canvas.moveTo(d+h,u),this.canvas.lineTo(d+h+l,u)}this.canvas.stroke(),console.log(i.x,i.y,"outofbounds?",a,o.Direction[n],d,u,l)}));this.canvas.stroke(),window.requestAnimationFrame((()=>this.drawFrame(t+1,s,n,i)))}}e.Painter=r}},e={};function s(o){var n=e[o];if(void 0!==n)return n.exports;var i=e[o]={exports:{}};return t[o](i,i.exports,s),i.exports}(()=>{const t=s(81),e=s(73);document.addEventListener("DOMContentLoaded",(function(){const s=document.body.getBoundingClientRect(),o=document.createElement("canvas"),n=s.height+10,i=s.width+10;document.body.appendChild(o),o.height=n,o.width=i,o.id="canvas";const r=o.getContext("2d");var a=window.devicePixelRatio||1;o.style.width=o.width+"px",o.style.height=o.height+"px",o.width*=a,o.height*=a,r.setTransform(a,0,0,a,0,0),r.translate(e.GAP,e.GAP),r.strokeStyle=e.BAR_COLOR,r.lineWidth=e.BAR_WIDTH,console.log("starting generation");const c=new t.GridContext(5,8),h=new t.BfsFill(c).newGrid(),l=function(){const t=[new e.WaveStrategy(!0,!1)];return t[t.length*Math.random()|0]}(),d=new e.Painter(r),u=l.generate(h,c);!function t(e,s){if(e===u.length)return s();d.paint(u[e],h,c,(()=>t(e+1,s)))}(0,(()=>console.log("done painting!",s,h)))}))})()})();